scene_theme_analysis: |
  You are an SRE Senior professional with 20 years of experience in comic script editing.
  Given this panel scene:
  ---
  {scene_text}
  ---
  Identify the dominant theme for this scene (choose from: Chaos, Reflection, Teaching, Decision, Meta, or another suitable category).
  Return only this JSON object:
  {{
    "scene_theme": "<type>",
    "rationale": "<short explanation>"
  }}

role_extraction: |
  You are an SRE team composition advisor for a graphic novel.
  Based on the scene theme "{scene_theme}", list the minimum required character roles (e.g., SRE Lead, junior SRE, Developer, Customer Rep), with a brief rationale for each.
  Return as JSON:
  [
    {{"role": "<role>", "rationale": "<why>"}},
    ...
  ]

scene_rewrite: |
  Rewrite the following panel scene for a graphic novel, ensuring that at least these roles appear: {required_roles}.
  If available, use time of day or customer context to enhance mood.
  Make the SRE Lead guide or teach the junior SRE(s).
  Focus on emotional/psychological realism—not just action.
  Scene:
  ---
  {original_scene}
  ---
  Return only the rewritten scene as plain text.

scene_checklist_evaluation: |
  Evaluate this revised panel scene against the following checklist:
  1. Does the scene provide a clear teaching narrative or moment?
  2. Is it consistent with this common example of the problem?
  ---
  {common_example}
  ---
  3. Are all required roles present and used purposefully?
  Required roles: {required_roles}
  Return only a JSON object:
  {{
    "teaching_narrative_satisfied": true/false,
    "common_example_aligned": true/false,
    "roles_used_effectively": true/false,
    "missing_elements": "<list any missing or weak elements>"
  }}

scene_narration_essence: |
  Create a concise 5-words-or-less statement that captures the essence of this scene:
  ---
  {scene_text}
  ---
  Return only the concise statement.

scene_rewrite_fix: |
  Revise the following scene to address these missing elements: {missing_elements}
  Scene:
  ---
  {scene_text}
  ---
  Ensure it satisfies the teaching narrative, aligns with the common example, and uses all required roles.
  Return only the improved scene.

character_enhancement: |
  For each required role in this list: {required_roles}, provide a realistic character for an SRE comic:
  - name
  - role
  - visual_tags (list)
  - required_constraints (list)
  - voice_tone
  - appearance (one vivid sentence)
  Return as a JSON array:
  [
    {{
      "name": "<name>",
      "role": "<role>",
      "visual_tags": [...],
      "required_constraints": [...],
      "voice_tone": "<tone>",
      "appearance": "<description>"
    }},
    ...
  ]

speech_bubble_generation: |
  For this scene and these characters, generate realistic speech bubbles.
  - Each character's dialogue should be ≤20 words.
  - Mark if the character is digital (e.g., "slack", "zoom", "sms") or in person.
  - If a character is silent, return an empty string.
  Scene:
  ---
  {scene_text}
  ---
  Characters:
  {characters}
  Return as JSON:
  [
    {{
      "character": "<name>",
      "role": "<role>",
      "speech": "<bubble text>",
      "interface": "in_person|slack|zoom|..."
    }},
    ...
  ]

panel_image_alt_text: |
  Summarize this scene for use as image alt text (≤15 words, clear and neutral).
  Scene:
  ---
  {scene_text}
  ---
  Return only the alt text.

neutral_scene_summary: |
  Summarize this scene in a neutral, descriptive way for a markdown "Scene Description".
  Focus on facts and setting, not emotion or action.
  Scene:
  ---
  {scene_text}
  ---
  Return only the neutral summary.

# (You can add more prompts for: image prompt for DALL-E, QA review, scene A/B explanation, etc.)
